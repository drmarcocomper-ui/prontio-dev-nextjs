PRONTIO — CONTINUAÇÃO DA CONVERSA (ASSINATURA DIGITAL SaaS B2B)



Contexto geral

Projeto: PRONTIO (sistema de prontuário médico)

Arquitetura: Front-end (HTML/CSS/JS puro) + Backend como API (Google Apps Script) + Google Sheets

Visão de produto: SaaS B2B, preparado para escalar



Decisão estratégica já tomada

O PRONTIO nascerá COM assinatura digital integrada

Modelo escolhido: SaaS B2B (Modelo 1)

O PRONTIO paga o provedor de assinatura (ex.: VidaaS / Bird ID)

Cada médico continua sendo dono do seu próprio certificado digital ICP-Brasil



Separação de responsabilidades (regra de ouro)

Médico:

Possui e paga seu certificado digital

Autoriza o uso da assinatura no PRONTIO

Realiza o ato de assinatura

PRONTIO:

Gera receitas e documentos

Integra com API do provedor de assinatura

Orquestra o fluxo de assinatura

Armazena PDFs assinados

Exibe status jurídico dos documentos

Provedor (VidaaS / Bird ID):

Valida identidade do médico

Executa a assinatura digital

Mantém trilha jurídica e evidências



Modelo de cobrança aceito

O PRONTIO paga ao provedor por:

Uso da API

Envio de documentos para assinatura

Webhooks e acompanhamento de status

O custo NÃO é do certificado do médico



Objetivo de UX

Médico ativa assinatura digital UMA VEZ nas configurações

A assinatura fica ativa como padrão para novas receitas

Em cada receita:

Pode haver confirmação (PIN/OTP/biometria), conforme exigência do provedor

Não é necessário reativar a assinatura toda vez



Arquitetura recomendada para o backend

Criar uma camada de abstração para assinatura



Estrutura sugerida:

Receita.gs

-> chama

AssinaturaService.gs (camada neutra)

-> delega para

VidaasProvider.gs

BirdIdProvider.gs (futuro)



Nunca chamar VidaaS/Bird ID diretamente espalhado no código



Modelo de dados (resumo)



Médico:

ID_Medico

assinatura:

enabled (true/false)

provider (VIDAAS | BIRDID)

linkedAt

status (ACTIVE | ERROR | UNLINKED)



Receita:

ID_Receita

status:

RASCUNHO

GERADA

PENDENTE_ASSINATURA

ASSINADA

ERRO_ASSINATURA

assinatura:

provider

jobId

signedAt

hashDocumento



Regra crítica:

Receita ASSINADA nunca pode ser editada

Alteração gera nova receita e nova assinatura



Fluxo de alto nível da receita digital

Médico gera receita

PRONTIO cria PDF

PRONTIO envia PDF para assinatura automaticamente

Médico confirma assinatura (quando exigido)

Provedor retorna PDF assinado

PRONTIO salva e disponibiliza o documento



Status visível para o médico

Rascunho

Pendente de assinatura

Assinada

Erro (com mensagem clara)



Decisão sobre offline

Assinatura digital NÃO funciona offline

Offline permitido apenas para:

rascunho de receita

Assinatura só ocorre quando online



Estratégia de implementação (ordem)

Fase 1:

Estrutura do módulo Assinatura

Mock de provedor (sem custo)

Geração de PDF



Fase 2:

Contrato com VidaaS ou Bird ID

Implementação real do provider

Webhooks

Tratamento de erros



Fase 3:

Modelo comercial

Planos (premium / add-on)

Auditoria e logs



Estado atual da conversa

Decisão de produto tomada

Modelo SaaS B2B confirmado

Próximo passo sugerido (a escolher):

Contrato de API interno do módulo Assinatura

Provider VidaaS (mock)

Planos e precificação do PRONTIO

README.md oficial do PRONTIO

