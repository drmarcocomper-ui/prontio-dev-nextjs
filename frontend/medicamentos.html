<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>PRONTIO - Medicamentos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="data:," />
  <script>(function(){try{var t=localStorage.getItem("prontio.theme");if(t==="dark"||t==="light"){document.documentElement.dataset.theme=t}else if(window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)").matches){document.documentElement.dataset.theme="dark"}}catch(e){}})();</script>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/components/modals.css">
  <link rel="stylesheet" href="assets/css/components/topbar.css">
  <link rel="stylesheet" href="assets/css/pages/page-medicamentos.css">
</head>

<body
  data-theme="light"
  data-page-id="medicamentos"
  data-subtitle="Cadastro de medicamentos para receitas"
  data-tag="Medicamentos"
  data-context="Configuracoes"
>
  <div class="app-shell">
    <aside id="sidebar" class="sidebar" data-component="sidebar">
      <div class="sidebar-header">
        <button type="button" class="icon-button js-toggle-compact" aria-label="Alternar modo compacto" aria-pressed="false">
          <svg viewBox="0 0 24 24" aria-hidden="true" class="icon-svg">
            <path d="M4 5h16v2H4V5zm0 6h10v2H4v-2zm0 6h16v2H4v-2z" fill="currentColor" />
          </svg>
        </button>
        <div class="app-brand">
          <div class="app-logo">PRONTIO</div>
          <div class="app-version" id="appVersion">v—</div>
        </div>
      </div>
      <nav class="sidebar-nav" id="sidebarNav" aria-label="Navegação principal">
        <a href="agenda.html" class="nav-link" data-page-id="agenda">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M7 2a1 1 0 0 0-1 1v1H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1V3a1 1 0 0 0-2 0v1H9V3A1 1 0 0 0 8 2zM5 9h14v9H5z" fill="currentColor"/></svg></span>
          <span class="label">Agenda</span>
        </a>
        <a href="pacientes.html" class="nav-link" data-page-id="pacientes">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0 2c-4 0-7 2-7 4.5V20a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1.5C19 16 16 14 12 14z" fill="currentColor"/></svg></span>
          <span class="label">Pacientes</span>
        </a>
        <a href="usuarios.html" class="nav-link" data-page-id="usuarios">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0 2c-4 0-7 2-7 4.5V20a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1.5C19 16 16 14 12 14z" fill="currentColor"/></svg></span>
          <span class="label">Usuários</span>
        </a>
        <a href="relatorios.html" class="nav-link nav-link-soon" data-page-id="relatorios" data-soon="true" aria-disabled="true" tabindex="-1">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M4 19h16v2H4v-2zm2-2V3h2v14H6zm5 0V7h2v10h-2zm5 0V11h2v6h-2z" fill="currentColor"/></svg></span>
          <span class="label">Relatórios</span>
          <span class="nav-badge" aria-hidden="true">Em breve</span>
        </a>
        <a href="financeiro.html" class="nav-link nav-link-soon" data-page-id="financeiro" data-soon="true" aria-disabled="true" tabindex="-1">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 15h-2v-2h2zm0-4h-2V7h2z" fill="currentColor"/></svg></span>
          <span class="label">Financeiro</span>
          <span class="nav-badge" aria-hidden="true">Em breve</span>
        </a>
      </nav>
      <div class="sidebar-group" data-nav-group="sistema">
        <div class="nav-label">Sistema</div>
        <a href="configuracoes.html" class="nav-link nav-link-sub" data-page-id="configuracoes">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 1 1 15.5 12 3.5 3.5 0 0 1 12 15.5zm7.43-2.53l-1.83-.92a5.6 5.6 0 0 0 0-2.1l1.83-.92a.5.5 0 0 0 .24-.6 9 9 0 0 0-2-3.46.5.5 0 0 0-.64-.1l-1.82.94a5.57 5.57 0 0 0-1.82-1.05V2.92a.5.5 0 0 0-.4-.49 9.15 9.15 0 0 0-4 0 .5.5 0 0 0-.4.49v1.84a5.57 5.57 0 0 0-1.82 1.05l-1.82-.94a.5.5 0 0 0-.64.1 9 9 0 0 0-2 3.46.5.5 0 0 0 .24.6l1.83.92a5.6 5.6 0 0 0 0 2.1l-1.83.92a.5.5 0 0 0-.24.6 9 9 0 0 0 2 3.46.5.5 0 0 0 .64.1l1.82-.94a5.57 5.57 0 0 0 1.82 1.05v1.84a.5.5 0 0 0 .4.49 9.15 9.15 0 0 0 4 0 .5.5 0 0 0 .4-.49v-1.84a5.57 5.57 0 0 0 1.82-1.05l1.82.94a.5.5 0 0 0 .64-.1 9 9 0 0 0 2-3.46.5.5 0 0 0-.24-.6z" fill="currentColor"/></svg></span>
          <span class="label">Configurações</span>
        </a>
        <a href="medicamentos.html" class="nav-link nav-link-sub" data-page-id="medicamentos">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M4.22 11.29l5.07-5.07a6 6 0 0 1 8.49 0l.01.01a6 6 0 0 1 0 8.49l-5.07 5.07a6 6 0 0 1-8.49 0 6 6 0 0 1 0-8.49zM12 8.5v7m-3.5-3.5h7" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round"/></svg></span>
          <span class="label">Medicamentos</span>
        </a>
        <a href="javascript:void(0)" class="nav-link nav-link-sub" data-modal-open="modalSobreSistema">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 15h-2v-2h2zm0-4h-2V7h2z" fill="currentColor"/></svg></span>
          <span class="label">Sobre</span>
        </a>
        <button type="button" class="nav-link nav-link-sub nav-link-action" data-nav-action="logout">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M16 13v-2H7V8l-5 4 5 4v-3h9zm3-10H8a2 2 0 0 0-2 2v3h2V5h11v14H8v-3H6v3a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z" fill="currentColor"/></svg></span>
          <span class="label">Sair</span>
        </button>
      </div>
      <div class="sidebar-footer">
        <span class="sidebar-year">&copy; <span id="anoAtualSidebar"></span> PRONTIO</span>
      </div>
    </aside>
    <div class="sidebar-backdrop" data-sidebar-backdrop></div>

    <main class="main-area">
      <div id="topbarMount" data-partial="topbar"></div>

      <section class="content content-medicamentos">
        <div id="mensagem" class="mensagem" style="display:none;" role="status" aria-live="polite"></div>

        <!-- Card Formulario -->
        <section id="secCadastroMedicamento" class="card" style="display:none;">
          <div class="card-header">
            <h2 id="tituloFormMedicamento">Novo Medicamento</h2>
            <p class="card-subtitle">Cadastre medicamentos para usar nas receitas.</p>
          </div>

          <form id="formMedicamento" class="form-medicamento" autocomplete="off">
            <input type="hidden" id="idMedicamento" name="idMedicamento">

            <div class="form-grid">
              <div class="campo campo-full">
                <label for="nomeMedicamento">Nome do medicamento *</label>
                <input type="text" id="nomeMedicamento" required placeholder="Ex.: Dipirona 500mg">
              </div>

              <div class="campo campo-full">
                <label for="posologiaPadrao">Posologia padrao</label>
                <input type="text" id="posologiaPadrao" placeholder="Ex.: 1 comprimido de 6/6h">
              </div>

              <div class="campo">
                <label for="quantidadePadrao">Quantidade padrao</label>
                <input type="text" id="quantidadePadrao" placeholder="Ex.: 20 comprimidos">
              </div>

              <div class="campo">
                <label for="viaPadrao">Via de administracao</label>
                <select id="viaPadrao">
                  <option value="">Selecione...</option>
                  <option value="VO">VO - Via Oral</option>
                  <option value="IM">IM - Intramuscular</option>
                  <option value="EV">EV - Endovenosa</option>
                  <option value="SC">SC - Subcutanea</option>
                  <option value="SL">SL - Sublingual</option>
                  <option value="Topico">Topico</option>
                  <option value="Retal">Retal</option>
                  <option value="Nasal">Nasal</option>
                  <option value="Ocular">Ocular</option>
                  <option value="Inalatorio">Inalatorio</option>
                </select>
              </div>

              <div class="campo">
                <label for="tipoReceita">Tipo de receita</label>
                <select id="tipoReceita">
                  <option value="COMUM">Comum</option>
                  <option value="ESPECIAL">Especial (Branca 2 vias)</option>
                  <option value="CONTROLADA">Controlada (Amarela)</option>
                  <option value="AZUL">Azul (B1/B2)</option>
                </select>
              </div>

              <div class="campo">
                <label class="check-favorito">
                  <input type="checkbox" id="favoritoMedicamento">
                  Favorito (aparece primeiro nas buscas)
                </label>
              </div>
            </div>

            <div class="botoes-form">
              <button type="submit" id="btnSalvarMedicamento" class="btn primario">Salvar medicamento</button>
              <button type="button" id="btnCancelarEdicao" class="btn secundario" style="display:none;">Cancelar edicao</button>
            </div>
          </form>
        </section>

        <hr class="divisor">

        <!-- Card Lista -->
        <section class="card">
          <div class="card-header card-header-lista">
            <div>
              <h2>Lista de Medicamentos</h2>
              <p class="card-subtitle">Clique em um medicamento para editar.</p>
            </div>
            <div class="acoes-header-lista">
              <button id="btnNovoMedicamento" class="btn primario" type="button">Novo medicamento</button>
              <button id="btnImportarCsv" class="btn secundario" type="button">Importar CSV</button>
              <button id="btnExcluirTodos" class="btn perigo" type="button">Excluir todos</button>
            </div>
          </div>

          <div class="linha-controles">
            <div class="bloco-filtro">
              <label for="filtroTexto">Buscar:</label>
              <input type="text" id="filtroTexto" placeholder="Nome do medicamento...">
            </div>
            <div class="bloco-filtro">
              <label class="check-ativo">
                <input type="checkbox" id="chkSomenteAtivos" checked>
                Apenas ativos
              </label>
              <label class="check-ativo">
                <input type="checkbox" id="chkApenasFavoritos">
                Apenas favoritos
              </label>
            </div>
          </div>

          <div id="listaMedicamentos" class="lista-medicamentos">
            <p class="lista-vazia">Carregando medicamentos...</p>
          </div>

          <div id="contadorMedicamentos" class="contador-itens">0 medicamentos</div>
        </section>

        <!-- Modal Importar CSV -->
        <div id="modalImportarCsv" class="modal-backdrop" style="display:none;" role="dialog" aria-modal="true">
          <div class="modal modal--lg">
            <div class="modal-header">
              <h2 class="modal-title">Importar Medicamentos (CSV)</h2>
              <button type="button" class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
              <p>O CSV deve ter cabecalho com as colunas. Colunas reconhecidas:</p>
              <code>Nome_Medicacao, Posologia, Quantidade, Via_Administracao, Tipo_Receita, Favorito, Ativo</code>
              <p class="texto-menor texto-suave" style="margin-top:4px;">Colunas extras (como ID_Medicamento) sao ignoradas automaticamente.</p>
              <br><br>

              <div class="csv-upload-area">
                <label for="csvFileInput" class="btn secundario" style="cursor:pointer;">Selecionar arquivo .csv</label>
                <input type="file" id="csvFileInput" accept=".csv,.txt" style="display:none;">
                <span id="csvFileName" class="texto-menor texto-suave" style="margin-left:8px;">Nenhum arquivo selecionado</span>
              </div>
              <br>
              <p class="texto-menor texto-suave">Ou cole o conteudo diretamente:</p>
              <textarea id="csvImportArea" rows="10" placeholder="Cole o CSV aqui..." style="width:100%;font-family:monospace;"></textarea>
              <p class="texto-menor texto-suave">Dica: No Google Sheets, selecione as linhas e copie (Ctrl+C). Cole aqui.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn secundario" data-close-modal>Cancelar</button>
              <button type="button" id="btnProcessarCsv" class="btn primario">Importar</button>
            </div>
          </div>
        </div>

      </section>
    </main>
  </div>

  <script src="assets/js/main.js"></script>
</body>
</html>
