<!-- frontend/partials/topbar.html -->
<div class="topbar" role="banner">
  <!-- ============================
       LEFT: CONTROLE DE NAVEGAÃ‡ÃƒO
       ============================ -->
  <div class="topbar-col-left">
    <div class="topbar-left-header">
      <!-- â˜° ÃšNICO CONTROLE DO MENU (MOBILE / SPLIT)
           - Usa data-sidebar-toggle
           - widget-sidebar.js cuida do comportamento
           - CSS controla quando aparece
      -->
      <button
        id="topbar-sidebar-toggle"
        class="topbar-menu-button topbar__menu-btn js-toggle-sidebar"
        type="button"
        data-sidebar-toggle="1"
        aria-label="Abrir menu"
        aria-expanded="false"
        title="Menu"
      >
        <span aria-hidden="true">â˜°</span>
      </button>

      <!-- TÃTULO / CONTEXTO -->
      <div class="topbar-title topbar__title">
        <div class="topbar-breadcrumb" id="topbar-meta-context"></div>

        <div class="topbar-title-main">
          <h1 id="topbar-title-text">PRONTIO</h1>
          <span class="topbar-tag" id="topbar-tag"></span>
        </div>

        <p class="topbar-subtitle" id="topbar-subtitle"></p>
      </div>
    </div>
  </div>

  <!-- ============================
       RIGHT: AÃ‡Ã•ES DO USUÃRIO
       ============================ -->
  <div class="topbar-col-right">
    <div class="topbar-actions">
      <div class="topbar-extra">
        <!-- USUÃRIO LOGADO -->
        <div class="topbar-user" aria-label="UsuÃ¡rio logado">
          <div class="topbar-user__avatar" aria-hidden="true">ğŸ‘¤</div>
          <div class="topbar-user__info">
            <div class="topbar-user__name" id="topbar-user-name">â€”</div>
            <div class="topbar-user__role" id="topbar-user-role">â€”</div>
          </div>
        </div>

        <!-- TEMA (exigido pelo main.js) -->
        <button
          id="btn-theme-toggle"
          class="topbar__icon-btn js-toggle-theme"
          type="button"
          aria-label="Alternar tema"
          aria-pressed="false"
          title="Tema"
        >
          <span class="js-theme-icon-sun" aria-hidden="true">â˜€ï¸</span>
          <span class="js-theme-icon-moon" aria-hidden="true" style="display:none;">ğŸŒ™</span>
        </button>

        <!-- CHAT -->
        <button
          id="prontio-chat-topbtn"
          class="topbar__icon-btn prontio-chat-topbtn"
          type="button"
          aria-label="Abrir chat"
          title="Chat"
        >
          <span class="prontio-chat-topbtn__icon" aria-hidden="true">ğŸ’¬</span>
          <span
            id="prontio-chat-badge"
            class="prontio-chat-badge"
            aria-hidden="true"
            style="display:none;"
          >0</span>
        </button>

        <div id="topbar-chat-slot" hidden></div>
      </div>

      <!-- META INFO -->
      <div class="topbar-meta" aria-label="InformaÃ§Ãµes">
        <span class="topbar-meta-item">
          <span id="topbar-meta-date"></span>
        </span>
      </div>
    </div>
  </div>
</div>

<!-- ============================
     CHAT (PAINEL FLUTUANTE)
     ============================ -->
<div id="prontio-chat-panel" class="prontio-chat-panel" aria-hidden="true">
  <div class="prontio-chat-panel__header">
    <div class="prontio-chat-panel__title">
      <span class="prontio-chat-panel__title-main">Minhas Conversas</span>
      <span id="prontio-chat-panel-subtitle" class="prontio-chat-panel__title-sub">
        Canal interno
      </span>
    </div>

    <div class="prontio-chat-panel__actions">
      <button
        id="prontio-chat-btn-refresh"
        class="prontio-chat-btn"
        type="button"
        title="Atualizar"
        aria-label="Atualizar"
      >â†»</button>
      <button
        id="prontio-chat-btn-close"
        class="prontio-chat-btn"
        type="button"
        title="Fechar"
        aria-label="Fechar"
      >âœ•</button>
    </div>
  </div>

  <div class="prontio-chat-panel__body">
    <div class="prontio-chat-sidebar">
      <div class="prontio-chat-search">
        <span class="prontio-chat-search__icon" aria-hidden="true">ğŸ”</span>
        <input
          id="prontio-chat-search-input"
          class="prontio-chat-search__input"
          type="text"
          placeholder="Buscar contato / sala"
          autocomplete="off"
        />
      </div>

      <div
        id="prontio-chat-roomlist"
        class="prontio-chat-roomlist"
        role="listbox"
        aria-label="Conversas"
      ></div>

      <div class="prontio-chat-footer">
        <button
          id="prontio-chat-btn-change-user"
          class="prontio-chat-footer__btn"
          type="button"
        >Trocar usuÃ¡rio</button>
      </div>
    </div>

    <div class="prontio-chat-conv">
      <div id="prontio-chat-conv-header" class="prontio-chat-conv__header">
        <button
          id="prontio-chat-back"
          class="prontio-chat-back"
          type="button"
          title="Voltar"
        >â†</button>

        <div class="prontio-chat-conv__header-txt">
          <div id="prontio-chat-conv-title" class="prontio-chat-conv__title">
            Chat principal
          </div>
          <div id="prontio-chat-conv-desc" class="prontio-chat-conv__desc">
            Canal geral da clÃ­nica.
          </div>
        </div>
      </div>

      <div
        id="prontio-chat-messages"
        class="prontio-chat-messages"
        aria-label="Mensagens"
      ></div>

      <form id="prontio-chat-form" class="prontio-chat-form">
        <textarea
          id="prontio-chat-input"
          class="prontio-chat-input"
          placeholder="Digite sua mensagem e pressione Enter para enviar (Shift+Enter para nova linha)..."
          rows="2"
        ></textarea>
        <button
          id="prontio-chat-send"
          class="prontio-chat-send"
          type="submit"
        >Enviar</button>
      </form>
    </div>
  </div>
</div>

<div id="prontio-chat-overlay" class="prontio-chat-overlay" aria-hidden="true"></div>
