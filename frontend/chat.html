<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PRONTIO - Chat</title>

  <!-- ‚úÖ Base do sistema (para sidebar + bot√µes) -->
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- CSS espec√≠fico da p√°gina de Chat -->
  <link rel="stylesheet" href="assets/css/pages/page-chat.css" />
</head>

<body
  data-page-id="chat"
  data-chat-standalone="true"
  data-subtitle="Comunica√ß√£o interna"
  data-tag="Chat"
  data-context="Chat"
>
  <div class="app-shell">
    <!-- SIDEBAR (inline para carregamento instant√¢neo) -->
    <aside id="sidebar" class="sidebar" data-component="sidebar">
      <div class="sidebar-header">
        <button type="button" class="icon-button js-toggle-compact" aria-label="Alternar modo compacto" aria-pressed="false">
          <svg viewBox="0 0 24 24" aria-hidden="true" class="icon-svg">
            <path d="M4 5h16v2H4V5zm0 6h10v2H4v-2zm0 6h16v2H4v-2z" fill="currentColor" />
          </svg>
        </button>
        <div class="app-brand">
          <div class="app-logo">PRONTIO</div>
          <div class="app-version" id="appVersion">v‚Äî</div>
        </div>
      </div>
      <nav class="sidebar-nav" id="sidebarNav" aria-label="Navega√ß√£o principal">
        <a href="agenda.html" class="nav-link" data-page-id="agenda">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M7 2a1 1 0 0 0-1 1v1H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1V3a1 1 0 0 0-2 0v1H9V3A1 1 0 0 0 8 2zM5 9h14v9H5z" fill="currentColor"/></svg></span>
          <span class="label">Agenda</span>
        </a>
        <a href="pacientes.html" class="nav-link" data-page-id="pacientes">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0 2c-4 0-7 2-7 4.5V20a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1.5C19 16 16 14 12 14z" fill="currentColor"/></svg></span>
          <span class="label">Pacientes</span>
        </a>
        <a href="usuarios.html" class="nav-link" data-page-id="usuarios">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0 2c-4 0-7 2-7 4.5V20a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1.5C19 16 16 14 12 14z" fill="currentColor"/></svg></span>
          <span class="label">Usu√°rios</span>
        </a>
        <a href="configuracoes.html" class="nav-link" data-page-id="configuracoes">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 1 1 15.5 12 3.5 3.5 0 0 1 12 15.5zm7.43-2.53l-1.83-.92a5.6 5.6 0 0 0 0-2.1l1.83-.92a.5.5 0 0 0 .24-.6 9 9 0 0 0-2-3.46.5.5 0 0 0-.64-.1l-1.82.94a5.57 5.57 0 0 0-1.82-1.05V2.92a.5.5 0 0 0-.4-.49 9.15 9.15 0 0 0-4 0 .5.5 0 0 0-.4.49v1.84a5.57 5.57 0 0 0-1.82 1.05l-1.82-.94a.5.5 0 0 0-.64.1 9 9 0 0 0-2 3.46.5.5 0 0 0 .24.6l1.83.92a5.6 5.6 0 0 0 0 2.1l-1.83.92a.5.5 0 0 0-.24.6 9 9 0 0 0 2 3.46.5.5 0 0 0 .64.1l1.82-.94a5.57 5.57 0 0 0 1.82 1.05v1.84a.5.5 0 0 0 .4.49 9.15 9.15 0 0 0 4 0 .5.5 0 0 0 .4-.49v-1.84a5.57 5.57 0 0 0 1.82-1.05l1.82.94a.5.5 0 0 0 .64-.1 9 9 0 0 0 2-3.46.5.5 0 0 0-.24-.6z" fill="currentColor"/></svg></span>
          <span class="label">Configura√ß√µes</span>
        </a>
        <a href="medicamentos.html" class="nav-link" data-page-id="medicamentos">
          <span class="icon"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M4.22 11.29l5.07-5.07a6 6 0 0 1 8.49 0l.01.01a6 6 0 0 1 0 8.49l-5.07 5.07a6 6 0 0 1-8.49 0 6 6 0 0 1 0-8.49zM12 8.5v7m-3.5-3.5h7" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round"/></svg></span>
          <span class="label">Medicamentos</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <button type="button" class="nav-link nav-link-action" data-nav-action="logout">
          <span class="label">Sair</span>
        </button>
      </div>
    </aside>
    <div class="sidebar-backdrop" data-sidebar-backdrop></div>

    <main class="main-area">
      <!-- ‚ö†Ô∏è Chat tem header pr√≥prio; main.js n√£o montar√° topbar quando data-chat-standalone="true" -->
      <header class="app-header">
        <div class="app-header__title">
          <span class="logo-dot"></span>
          <span class="app-name">PRONTIO</span>
          <span class="app-section">/ Chat</span>
        </div>

        <div class="app-header__right">
          <!-- Navega√ß√£o padronizada -->
          <div class="app-header__nav">
            <a id="chat-nav-agenda" href="#" class="btn btn-ghost">
              Ver agenda
            </a>
            <a id="chat-nav-prontuario" href="#" class="btn btn-ghost">
              Ver prontu√°rio
            </a>
          </div>

          <div class="app-header__user">
            <span id="current-user-label"></span>
            <button id="change-user-button" class="btn btn-outline">
              Trocar usu√°rio
            </button>
          </div>
        </div>
      </header>

      <main class="chat-layout">
        <section class="chat-sidebar">
          <h2>Salas</h2>

          <!-- Salas fixas -->
          <div id="static-rooms">
            <button
              class="chat-room chat-room--active"
              data-room-id="default"
              data-room-label="Chat principal"
              data-room-description="Canal geral da cl√≠nica."
            >
              ü©∫ Chat principal
            </button>

            <button
              class="chat-room"
              data-room-id="secretaria"
              data-room-label="Secretaria"
              data-room-description="Comunica√ß√£o entre recep√ß√£o e equipe."
            >
              üìã Secretaria
            </button>

            <button
              class="chat-room"
              data-room-id="financeiro"
              data-room-label="Financeiro"
              data-room-description="Assuntos de cobran√ßa e faturamento."
            >
              üí∞ Financeiro
            </button>
          </div>

          <!-- Salas criadas automaticamente (paciente/agenda) -->
          <p class="chat-sidebar__dynamic-label">
            Salas din√¢micas
          </p>
          <div id="patient-rooms">
            <!-- Bot√µes de salas de pacientes/consultas criados via JS -->
          </div>
        </section>

        <section class="chat-main">
          <div class="chat-main__header">
            <div>
              <h1 id="chat-room-title">Chat principal</h1>
              <p id="chat-room-subtitle" class="chat-main__subtitle">
                Canal geral da cl√≠nica.
              </p>
            </div>
            <button id="reload-button" class="btn btn-ghost" title="Atualizar mensagens">
              ‚ü≥ Atualizar
            </button>
          </div>

          <!-- PAINEL: PR√ìXIMO PACIENTE -->
          <div id="next-patient-panel" class="next-patient">
            <div class="next-patient__info">
              <div class="next-patient__title-row">
                <h2 class="next-patient__title">Pr√≥ximo paciente</h2>
                <span
                  id="next-patient-status-pill"
                  class="next-patient__status-pill next-patient__status-pill--empty"
                >
                  Fila vazia
                </span>
              </div>
              <p id="next-patient-summary" class="next-patient__summary">
                Nenhum paciente na fila neste momento.
              </p>
              <p id="next-patient-details" class="next-patient__details"></p>
            </div>
            <div class="next-patient__actions">
              <button id="btn-next-patient" class="btn btn-primary">
                Chamar pr√≥ximo
              </button>
              <button id="btn-refresh-next-patient" class="btn btn-ghost">
                Atualizar fila
              </button>
            </div>
          </div>

          <div id="chat-messages" class="chat-messages">
            <!-- Mensagens ser√£o inseridas aqui via JavaScript -->
          </div>

          <form id="chat-form" class="chat-input-area" autocomplete="off">
            <textarea
              id="chat-input"
              class="chat-input-area__textarea"
              rows="2"
              placeholder="Digite sua mensagem e pressione Enter para enviar (Shift+Enter para nova linha)..."
            ></textarea>
            <button type="submit" id="send-button" class="btn btn-primary">
              Enviar
            </button>
          </form>
        </section>
      </main>
    </main>
  </div>

  <!-- Chat antigo -->
  <script src="assets/js/chat.js"></script>

  <!-- ‚úÖ Main (para carregar sidebar √∫nica) -->
  <script src="assets/js/main.js"></script>
</body>
</html>
